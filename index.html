<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For Antratica ‚Äî </title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js" defer></script>

  <style>
    :root{
      --paper-bg: #fffdf9;
      --paper-edge: #efe6dd;
      --ink: #231f20;
      --muted: #6b675f;
      --accent-ink: #b86f50;
      --heart: #ff6b8a;
      --maxw: 980px;
      --radius: 14px;
      --hand: "Patrick Hand", "Segoe UI", Arial, sans-serif;
      --serif: "Libre Baskerville", Georgia, serif;
      --slide-h: 70vh;
      --gutter: 18px;
      /* doodle tint (adjustable) */
      --doodle-color: rgba(184,111,80,0.30);
      --doodle-fill: rgba(184,111,80,0.14);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:var(--hand);background:linear-gradient(180deg,#f7f3ee 0%,#fbf9f6 100%);color:var(--ink);-webkit-font-smoothing:antialiased}

    .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:22px}

    .book{
      width:100%;
      max-width:var(--maxw);
      background:linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,0.99));
      border-radius:16px;
      padding:20px;
      box-shadow: 0 28px 60px rgba(12,12,15,0.08), inset 0 1px 0 rgba(255,255,255,0.6);
      display:flex;flex-direction:column;gap:14px;position:relative;overflow:visible;
    }

    .header{display:flex;align-items:center;gap:12px}
    .washi{
      width:120px;height:42px;border-radius:6px;display:flex;align-items:center;justify-content:center;
      transform:rotate(-6deg);font-family:var(--serif);font-weight:700;color:var(--muted);
      background:linear-gradient(90deg,#f7e6d0,#f2dcb4);box-shadow:0 8px 18px rgba(0,0,0,0.06)
    }
    .title{font-family:var(--serif);color:var(--muted);font-size:18px}

    .slides{position:relative;display:flex;align-items:center;justify-content:center;min-height:var(--slide-h);padding:18px}
    .paper{
      width:100%;max-width:880px;background:var(--paper-bg);border-radius:12px;padding:20px;border:1px solid var(--paper-edge);
      box-shadow:0 8px 28px rgba(8,8,8,0.06);position:relative;overflow:hidden;
      min-height:calc(var(--slide-h) - 8px);
    }

    .paper::before{
      content:"";position:absolute;inset:0;pointer-events:none;
      background-image:
        radial-gradient(circle at 8% 12%, rgba(0,0,0,0.02), transparent 18%),
        linear-gradient(180deg, rgba(255,255,255,0.01), transparent 40%);
      opacity:0.6;
    }

    .slide{
      position:absolute;inset:0;padding:20px;display:none;flex-direction:column;gap:10px;align-items:center;justify-content:center;text-align:center;
    }
    .slide.active{display:flex;z-index:3;animation:slideIn 420ms cubic-bezier(.22,.9,.3,1)}
    @keyframes slideIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

    .head{font-size:26px;margin:6px 0;font-family:var(--hand);color:var(--accent-ink)}
    .content{max-width:760px;text-align:left;font-size:18px;line-height:1.6;color:var(--ink);padding:6px 4px}
    .note{font-size:14px;color:var(--muted)}
    .long{max-height:calc(var(--slide-h) - 160px);overflow-y:auto;padding-right:10px;-webkit-overflow-scrolling:touch;pointer-events:auto}

    /* AOT slide style (subtle variant) */
    .aot .head{font-family:var(--serif);font-weight:700;color:#1f1b1c;letter-spacing:0.6px}
    .aot .content{font-family:var(--serif);font-style:italic;color:#1a1a1a;background:linear-gradient(180deg, rgba(0,0,0,0.01), transparent);padding:12px;border-radius:8px;border-left:4px solid rgba(10,10,10,0.06)}
    .aot .emblem{width:52px;height:52px;opacity:0.9;margin-bottom:10px;filter:grayscale(0.08) contrast(0.95)}

    .doodle-svg{position:absolute;right:18px;top:10px;width:140px;height:140px;pointer-events:none;transform:rotate(-8deg);opacity:0.95}

    .controls{display:flex;align-items:center;justify-content:space-between;margin-top:8px;gap:12px}
    .left-controls{display:flex;gap:8px;align-items:center}
    .btn{background:#fff;border:1px solid rgba(0,0,0,0.06);padding:10px 14px;border-radius:10px;cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,0.04);transition:transform .15s}
    .btn:hover{transform:translateY(-3px)}
    .btn.ghost{background:transparent;border:none;color:var(--muted)}

    .dots{display:flex;gap:8px;align-items:center}
    .dot{width:10px;height:10px;border-radius:50%;background:#efe7df;box-shadow:inset 0 -2px 0 rgba(0,0,0,0.06);transition:transform .18s;cursor:pointer}
    .dot.active{background:var(--heart);transform:scale(1.15);box-shadow:0 8px 18px rgba(255,107,138,0.12)}

    .page-info{font-family:var(--serif);color:var(--muted);font-size:13px}

    .final-title{font-size:34px;color:var(--heart);font-weight:700;text-shadow:0 10px 30px rgba(255,107,138,0.06)}
    .final-sub{font-size:16px;color:var(--muted);margin-top:8px}

    .particles{position:absolute;inset:0;pointer-events:none;z-index:2}
    .confetti{position:absolute;inset:0;pointer-events:none;z-index:9999}

    .writing{white-space:pre-wrap;border-right:2px solid rgba(0,0,0,0.08);animation:caret 1s steps(1) infinite}
    @keyframes caret{0%{border-color:rgba(0,0,0,0.06)}50%{border-color:rgba(0,0,0,0.22)}100%{border-color:rgba(0,0,0,0.06)}}

    /* --- Sticker aesthetic --- */
    .sticker-wrap {
      position: relative;
      display: inline-block;
      margin-top: 20px;
      transform: rotate(-2.5deg);
      /* float gently */
      animation: gentleFloat 5s ease-in-out infinite;
      transition: filter 240ms;
      will-change: transform;
    }

    .sticker-img {
      width: 220px;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 12px 28px rgba(0,0,0,0.08), 0 0 0 1px rgba(0,0,0,0.05);
      background: #fffefb;
      display: block;
      transform: rotate(1.8deg);
      user-select: none;
      -webkit-user-drag: none;
    }

    .tape {
      position: absolute;
      width: 60px;
      height: 18px;
      background: linear-gradient(90deg, #f7e6d0 0%, #f2dcb4 100%);
      opacity: 0.88;
      box-shadow: 0 3px 6px rgba(0,0,0,0.05);
      border-radius: 4px;
      border: 1px solid rgba(0,0,0,0.03);
    }

    .tape-tl { top: -12px; left: -14px; transform: rotate(-10deg); }
    .tape-tr { top: -12px; right: -14px; transform: rotate(8deg); }

    /* subtle pop when slide becomes active (not cringy) */
    @keyframes pop {
      0% { transform: rotate(-2.5deg) scale(0.96); filter: drop-shadow(0 6px 12px rgba(0,0,0,0.06)); }
      50% { transform: rotate(-0.6deg) scale(1.06); filter: drop-shadow(0 18px 34px rgba(0,0,0,0.12)); }
      100% { transform: rotate(-2.5deg) scale(1); filter: drop-shadow(0 12px 26px rgba(0,0,0,0.08)); }
    }

    .sticker-wrap.pop {
      animation: gentleFloat 5s ease-in-out infinite, pop 760ms cubic-bezier(.2,.9,.3,1);
    }

    @keyframes gentleFloat {
      0%, 100% { transform: rotate(-2.5deg) translateY(0); }
      50% { transform: rotate(-1deg) translateY(-4px); }
    }

    /* focus-visible for keyboard users (accessibility) */
    .btn:focus, .dot:focus, .sticker-wrap:focus {
      outline: 3px solid rgba(184,111,80,0.14);
      outline-offset: 6px;
      border-radius: 8px;
    }

    /* responsive tweak: shrink sticker on small screens */
    @media(max-width:760px){
      .book{padding:14px}
      .paper{padding:14px}
      .head{font-size:20px}
      .content{font-size:16px}
      .doodle-svg{width:98px;height:98px;right:8px;top:8px}
      .aot .content{font-size:15px}
      .aot .emblem{width:40px;height:40px}

      .sticker-img { width: 160px; }
      .tape { width: 44px; height: 14px; }
      .tape-tl { top: -10px; left: -10px; }
      .tape-tr { top: -10px; right: -10px; }
    }

    /* respect user reduced motion preference */
    @media (prefers-reduced-motion: reduce) {
      .sticker-wrap, .sticker-wrap.pop { animation: none !important; transform: none !important; }
      .slide.active { animation: none !important; }
      .writing { animation: none !important; border-right: 1px solid rgba(0,0,0,0.06); }
      .mini-doodle, .mini-doodle-2 { transition: none !important; transform: none !important; }
    }

    /* --- Doodles: default + active behaviour --- */
    .mini-doodle, .mini-doodle-2 {
      position:absolute;
      width:92px;
      height:92px;
      opacity:0.14;
      pointer-events:none;
      transition:opacity 280ms ease, filter 360ms cubic-bezier(.2,.9,.3,1), transform 360ms cubic-bezier(.2,.9,.3,1);
      filter: drop-shadow(0 2px 6px rgba(0,0,0,0.03));
    }

    /* stronger when the slide is active */
    .slide.active .mini-doodle,
    .slide.active .mini-doodle-2 {
      opacity:0.36;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,0.06));
      transform: translateY(-4px);
    }

    /* per-slide placement ‚Äî keep original subtle rotations */
    .d-s0 { right:18px; bottom:14px; transform:rotate(-6deg) scale(0.98); }
    .d-s0-2 { right:88px; bottom:30px; transform:rotate(-12deg) scale(0.78); }

    .d-s1 { left:14px; top:26px; transform:rotate(4deg) scale(0.92); }
    .d-s1-2 { left:64px; top:14px; transform:rotate(-6deg) scale(0.76); }

    .d-s2 { left:10px; bottom:20px; transform:rotate(-4deg) scale(1); }
    .d-s2-2 { left:18px; bottom:86px; transform:rotate(2deg) scale(0.86); }

    .d-s2b { right:22px; top:64px; transform:rotate(8deg) scale(0.9); }
    .d-s2b-2 { right:64px; top:84px; transform:rotate(-4deg) scale(0.78); }

    .d-s2a { left:18px; bottom:18px; transform:rotate(-2deg) scale(0.98); }
    .d-s2a-2 { left:56px; bottom:22px; transform:rotate(6deg) scale(0.78); }

    .d-s3 { right:12px; top:18px; transform:rotate(-10deg) scale(1.02); }
    .d-s3-2 { right:72px; top:48px; transform:rotate(4deg) scale(0.88); }

    .d-s4 { left:18px; top:18px; transform:rotate(2deg) scale(0.94); }
    .d-s4-2 { left:56px; top:44px; transform:rotate(-8deg) scale(0.8); }

    .d-s5 { right:22px; bottom:22px; transform:rotate(-8deg) scale(1); }
    .d-s5-2 { right:62px; bottom:68px; transform:rotate(6deg) scale(0.78); }

    /* doodle stroke + fill defaults (keeps them sketchy) */
    .mini-doodle path, .mini-doodle circle, .mini-doodle rect, .mini-doodle line,
    .mini-doodle-2 path, .mini-doodle-2 circle, .mini-doodle-2 rect, .mini-doodle-2 line {
      stroke: var(--doodle-color);
      fill: none;
      stroke-width:1.6;
      stroke-linecap:round;
      stroke-linejoin:round;
    }
    .mini-doodle .fill, .mini-doodle-2 .fill { fill: var(--doodle-fill); opacity:1; stroke:none; }

    /* a small stamp/ribbon accent for final slide */
    .final-ribbon {
      display:inline-block;
      margin-top:10px;
      background: linear-gradient(180deg,#fff1f6,#ffeef0);
      border-radius:8px;
      padding:6px 10px;
      box-shadow: 0 8px 18px rgba(255,107,138,0.06);
      font-family:var(--serif);
      color:#a33b57;
      font-weight:700;
      font-size:13px;
    }
  </style>

</head>
<body>
  <div class="wrap">
    <div class="book" role="main" aria-label="Birthday scrapbook for Antratica">

      <div class="header">
        <div class="washi">A little thing</div>
        <div class="title">For <strong>Antratica</strong></div>
      </div>

      <div class="slides">
        <div class="paper">

          <!-- background sketch (unchanged) -->
          <svg class="doodle-svg" viewBox="0 0 140 140" aria-hidden="true" preserveAspectRatio="xMinYMin">
            <g fill="none" stroke="#e6c9b2" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
              <path d="M8 18 C36 8, 84 6, 132 20" opacity="0.95"/>
              <path d="M16 42 C44 34, 80 34, 124 46" opacity="0.85"/>
              <circle cx="28" cy="92" r="3.2" fill="#ffd8c4" stroke="none"/>
              <path d="M74 98 C78 94, 92 90, 122 96" stroke="#ffd8c4" opacity="0.6"></path>
            </g>
          </svg>

          <!-- SLIDE 1: opener -->
          <section class="slide" id="s0">
            <h2 class="head">Hey ‚Äî</h2>
            <div class="content" style="text-align:left">
              <p id="slide1" class="writing">lol, I hope you don't feel as weird as i do while creating this. Anyways, i always wanted to try this.</p>
            </div>
            <div style="margin-top:12px"><small class="note">Tap / click anywhere to move forward</small></div>

            <!-- doodle: constellation (existing) -->
            <svg class="mini-doodle d-s0" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="stars doodle">
              <g>
                <circle class="fill" cx="10" cy="12" r="2.6"></circle>
                <circle class="fill" cx="24" cy="6" r="1.8"></circle>
                <circle class="fill" cx="36" cy="14" r="2.2"></circle>
                <path d="M10 12 L24 6 L36 14" style="stroke:var(--doodle-color);stroke-width:1.6"></path>
              </g>
            </svg>

            <!-- new doodle: tiny speech bubble + moon to echo "hey" tone -->
            <svg class="mini-doodle-2 d-s0-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="speech moon">
              <g>
                <path d="M14 22c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8c-1.7 0-3.3-.5-4.6-1.4L14 34l1.4-4.6C14.5 26.3 14 24.7 14 22z" style="stroke:var(--doodle-color);fill:none"></path>
                <circle class="fill" cx="34" cy="12" r="2.2"></circle>
              </g>
            </svg>
          </section>

          <!-- SLIDE 2: "To my... whatever you are" -->
          <section class="slide" id="s1" aria-hidden="true">
            <h2 class="head">To my‚Ä¶ well, whatever you are</h2>
            <div class="content">
              <p>I don‚Äôt know why this feels so intimate lol when the bond we have is evidently mutually platonic. Maybe it's because i have never gone out of my way to do anything special for someone...</p>
            </div>

            <!-- scribbly heart -->
            <svg class="mini-doodle d-s1" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="heart doodle">
              <path d="M12 20 C10 14, 18 10, 24 14 C30 10, 38 14, 36 20 C34 28, 24 34, 24 34 C24 34,14 28,12 20 Z" style="stroke:var(--doodle-color);fill:none"></path>
            </svg>

            <!-- new doodle: tiny envelope & handwritten underline to suggest 'a note' -->
            <svg class="mini-doodle-2 d-s1-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="envelope doodle">
              <g>
                <rect x="6" y="12" width="36" height="24" rx="3" style="stroke:var(--doodle-color);fill:none"></rect>
                <path d="M8 14 L24 26 L40 14" style="stroke:var(--doodle-color)"></path>
                <path d="M10 38 L38 38" style="stroke:var(--doodle-color);stroke-width:1.4"></path>
              </g>
            </svg>
          </section>

          <!-- SLIDE 3: long reflection (So ‚Äî) -->
          <section class="slide" id="s2" aria-hidden="true">
            <h2 class="head">So ‚Äî</h2>
            <div class="content long" id="slide3" tabindex="0">
              <p>Though i am not good with words, I still have plenty to say.
 We have had our disagreements, There have been times when i have behaved strangely with you, But know that none of that has ever made me harbor any ill feelings towards you. I have and i will, always hope good for you. 
lol, i am having a really hard time being nice with you...</p>
            </div>

            <!-- bookmark doodle -->
            <svg class="mini-doodle d-s2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="bookmark doodle">
              <path d="M8 6 C20 18, 36 18, 40 30" style="stroke:var(--doodle-color);fill:none"></path>
              <rect class="fill" x="6" y="32" width="12" height="6" rx="2"></rect>
            </svg>

            <!-- new doodle: tiny checklist/timeline to hint 'a lot to say' -->
            <svg class="mini-doodle-2 d-s2-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="timeline doodle">
              <g>
                <line x1="14" y1="12" x2="36" y2="12" style="stroke:var(--doodle-color)"></line>
                <circle class="fill" cx="12" cy="12" r="2.2"></circle>
                <circle class="fill" cx="24" cy="12" r="1.6"></circle>
                <line x1="14" y1="20" x2="36" y2="20" style="stroke:var(--doodle-color)"></line>
                <circle class="fill" cx="12" cy="20" r="2.2"></circle>
              </g>
            </svg>
          </section>

          <!-- SLIDE "Well ‚Äî" (nostalgia) -->
          <section class="slide" id="s2b" aria-hidden="true">
            <h2 class="head">Well ‚Äî</h2>
            <div class="content">
              <p>I don't usually think about it, but now looking back at those late night VCs gives a faint bittersweet feeling of nostalgia that i will always look back as times when the life was peaceful.</p>
            </div>

            <!-- camera icon -->
            <svg class="mini-doodle d-s2b" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="camera doodle">
              <rect x="6" y="12" width="36" height="24" rx="4" style="stroke:var(--doodle-color);fill:none"></rect>
              <circle class="fill" cx="24" cy="24" r="5"></circle>
              <rect x="10" y="8" width="8" height="4" rx="1" style="stroke:var(--doodle-color);fill:none"></rect>
            </svg>

            <!-- new doodle: tiny film roll / polaroid stack -->
            <svg class="mini-doodle-2 d-s2b-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="film doodle">
              <g>
                <rect x="8" y="14" width="28" height="20" rx="3" style="stroke:var(--doodle-color);fill:none"></rect>
                <rect class="fill" x="10" y="16" width="6" height="6" rx="1"></rect>
                <rect class="fill" x="26" y="16" width="6" height="6" rx="1"></rect>
              </g>
            </svg>
          </section>

          <!-- AOT slide: important side note -->
          <section class="slide aot" id="s2a" aria-hidden="true">
            <svg class="emblem" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <g fill="none" stroke="#1b1b1b" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round">
                <path d="M28 6 L32 18 L44 20 L34 28 L36 40 L28 34 L20 40 L22 28 L12 20 L24 18 Z" fill="#f4e6e6" opacity="0.9"/>
              </g>
            </svg>

            <h2 class="head" style="font-size:20px;letter-spacing:0; margin-top:6px; text-transform:lowercase; color:#151212;">important side note:</h2>
            <div class="content" style="text-align:center; max-width:640px;">
              <p style="margin:8px 0;">Attack on titan is the greatest piece of fiction ever created!</p>
              <p style="margin:10px 0 0;color:var(--muted);font-size:13px;">Attack on Mid*</p>
            </div>

            <!-- laurel badge -->
            <svg class="mini-doodle d-s2a" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="badge doodle">
              <path d="M24 8 C30 10,36 16,36 24 C36 32,30 36,24 40 C18 36,12 32,12 24 C12 16,18 10,24 8 Z" style="stroke:var(--doodle-color);fill:none"></path>
              <circle class="fill" cx="24" cy="24" r="3"></circle>
            </svg>

            <!-- new doodle: small starburst / comic sparkle for "important" -->
            <svg class="mini-doodle-2 d-s2a-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="spark doodle">
              <g>
                <path d="M24 6 L26 16 L36 18 L26 22 L24 32 L22 22 L12 18 L22 16 Z" style="stroke:var(--doodle-color);fill:none"></path>
              </g>
            </svg>
          </section>

          <!-- SLIDE 4 (photos) - single sticker remains -->
          <section class="slide" id="s3" aria-hidden="true">
            <h2 class="head">Let's copy your idea</h2>
            <div class="content" style="text-align:center">
              <p>How can i not have a slide for this og sticker...</p>
              <div style="display:flex;gap:12px;justify-content:center;margin-top:14px;flex-wrap:wrap">
                <div class="sticker-wrap" aria-hidden="false" role="img" title="sticker" tabindex="0">
                  <img src="sticker.webp" alt="sticker" class="sticker-img" loading="lazy" />
                  <div class="tape tape-tl" aria-hidden="true"></div>
                  <div class="tape tape-tr" aria-hidden="true"></div>
                </div>
              </div>
            </div>

            <!-- polaroid doodle -->
            <svg class="mini-doodle d-s3" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="polaroid doodle">
              <rect x="6" y="8" width="36" height="28" rx="3" style="stroke:var(--doodle-color);fill:none"></rect>
              <path d="M12 18 L20 26 L34 12" style="stroke:var(--doodle-color);fill:none"></path>
            </svg>

            <!-- new doodle: paperclip + tiny shadow to make the sticker feel 'taped & clipped' -->
            <svg class="mini-doodle-2 d-s3-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="paperclip doodle">
              <g>
                <path d="M18 12 C22 8, 30 8, 34 12 C38 16,38 24,34 28 L22 40 C18 44,12 44,8 40" style="stroke:var(--doodle-color);fill:none"></path>
                <rect class="fill" x="30" y="6" width="8" height="4" rx="1"></rect>
              </g>
            </svg>
          </section>

          <!-- SLIDE 5: Almost there -->
          <section class="slide" id="s4" aria-hidden="true">
            <h2 class="head">Almost there‚Ä¶</h2>
            <div class="content" style="text-align:center">
              <p>One last little thing...</p>
            </div>

            <!-- spark/firerork -->
            <svg class="mini-doodle d-s4" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="spark doodle">
              <line x1="24" y1="8" x2="24" y2="18" style="stroke:var(--doodle-color)"></line>
              <line x1="16" y1="12" x2="22" y2="18" style="stroke:var(--doodle-color)"></line>
              <circle class="fill" cx="24" cy="20" r="2.4"></circle>
            </svg>

            <!-- new doodle: tiny candle to hint 'almost final' -->
            <svg class="mini-doodle-2 d-s4-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="candle doodle">
              <g>
                <rect x="22" y="18" width="4" height="14" rx="1" style="stroke:var(--doodle-color);fill:none"></rect>
                <path d="M24 14 C23 12,25 12,24 10" style="stroke:var(--doodle-color);fill:none"></path>
                <circle class="fill" cx="24" cy="12" r="1.8"></circle>
              </g>
            </svg>
          </section>

          <!-- FINAL SLIDE -->
          <section class="slide" id="s5" aria-hidden="true" data-final="true">
            <div style="text-align:center">
              <div class="final-title" id="finalTitle">Happy Birthday, Mansi</div>
              <div class="final-sub" id="finalSub">May whatever you manifest 24/7 comes true.</div>
              <div style="margin-top:12px">
                <span class="final-ribbon"> üìé </span>
              </div>
            </div>

            <!-- confetti shard doodle -->
            <svg class="mini-doodle d-s5" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="confetti doodle">
              <rect class="fill" x="10" y="10" width="4" height="8" rx="1"></rect>
              <rect class="fill" x="34" y="18" width="3" height="6" rx="1"></rect>
              <path d="M20 28 L28 20" style="stroke:var(--doodle-color);fill:none"></path>
            </svg>

            <!-- new doodle: round 'stamp' -->
            <svg class="mini-doodle-2 d-s5-2" viewBox="0 0 48 48" aria-hidden="true" role="img" aria-label="stamp doodle">
              <g>
                <circle cx="24" cy="24" r="10" style="stroke:var(--doodle-color);fill:none"></circle>
                <circle class="fill" cx="24" cy="24" r="2"></circle>
                <path d="M16 28 L32 20" style="stroke:var(--doodle-color);stroke-width:1.4"></path>
              </g>
            </svg>
          </section>

          <div class="particles" aria-hidden="true"></div>
          <div class="confetti" aria-hidden="true"></div>

        </div>
      </div>

      <div class="controls">
        <div class="left-controls">
          <button class="btn ghost" id="backBtn" aria-label="Previous slide">‚Üê Back</button>
          <button class="btn" id="nextBtn" aria-label="Next slide">Next ‚Üí</button>
        </div>

        <div style="display:flex;align-items:center;gap:12px">
          <div class="dots" id="dotsContainer" aria-hidden="true"></div>
          <div class="page-info" id="pageInfo">1 / 7</div>
        </div>
      </div>

    </div>
  </div>

  <script>
    const slides = Array.from(document.querySelectorAll('.slide'));
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const pageInfo = document.getElementById('pageInfo');
    const dotsContainer = document.getElementById('dotsContainer');
    const particlesEl = document.querySelector('.particles');
    const confettiEl = document.querySelector('.confetti');

    const reducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    let idx = 0;
    const total = slides.length;
    pageInfo.textContent = `1 / ${total}`;
    let navLocked = false;
    function lock(ms=420){ navLocked=true; setTimeout(()=>navLocked=false,ms); }

    // generate dots dynamically (keyboard accessible)
    const dots = [];
    for(let i=0;i<total;i++){
      const d = document.createElement('div');
      d.className = 'dot';
      d.dataset.i = i;
      d.setAttribute('tabindex','0');
      d.setAttribute('role','button');
      d.setAttribute('aria-label', `Go to slide ${i+1}`);
      d.addEventListener('click', ()=> updateState(i));
      d.addEventListener('keydown', (ev)=>{
        if(ev.key === 'Enter' || ev.key === ' '){
          ev.preventDefault();
          updateState(i);
        }
      });
      dotsContainer.appendChild(d);
      dots.push(d);
    }

    function updateState(i){
      if(navLocked) return; lock();
      if(i<0) i=0; if(i>=total) i=total-1; idx=i;

      slides.forEach((s,j)=>{
        const active = j===i;
        s.classList.toggle('active', active);
        s.setAttribute('aria-hidden', !active);
        if(active){
          const long = s.querySelector('.long');
          if(long) long.scrollTop = 0;
          setTimeout(()=> { s.setAttribute('tabindex','0'); s.focus({preventScroll:true}); }, 40);
        } else {
          s.removeAttribute('tabindex');
        }
      });

      dots.forEach((d,j)=> d.classList.toggle('active', j===i) );
      pageInfo.textContent = `${i+1} / ${total}`;

      // sticker pop on photos slide
      try {
        const sticker = document.querySelector('.sticker-wrap');
        const photosSlide = document.getElementById('s3');
        if(sticker){
          if(photosSlide && photosSlide.classList.contains('active') && !reducedMotion){
            sticker.classList.remove('pop');
            setTimeout(()=> sticker.classList.add('pop'), 20);
            setTimeout(()=> sticker.classList.remove('pop'), 1000);
          } else {
            sticker.classList.remove('pop');
          }
        }
      } catch(e){ /* no-op */ }

      // final confetti
      if( slides[i].dataset.final === "true" ) runFinalReveal();
    }

    nextBtn.addEventListener('click', ()=> updateState(idx+1));
    backBtn.addEventListener('click', ()=> updateState(idx-1));

    document.querySelector('.paper').addEventListener('click', (e)=>{
      if(e.target.closest('.btn')) return;
      if(e.target.closest('.long')) return;
      updateState(idx+1);
    });

    document.addEventListener('keydown', e=>{
      const tag = (e.target && e.target.tagName) ? e.target.tagName.toLowerCase() : '';
      const editable = e.target && (e.target.isContentEditable || tag === 'input' || tag === 'textarea' || e.target.closest && e.target.closest('.long'));
      if(editable && (e.key === ' ')) return;
      if(e.key === 'ArrowRight' || e.key === 'Enter') updateState(idx+1);
      if(e.key === 'ArrowLeft' || e.key === 'Backspace') updateState(idx-1);
      if(e.key === ' '){
        if(tag === 'button' || tag === 'a' || e.target.isContentEditable) return;
        e.preventDefault();
        updateState(idx+1);
      }
    });

    // init
    updateState(0);

    /* typewriter for first slide (preserves your text) */
    (function typeFirst(){
      const el = document.getElementById('slide1');
      if(!el) return;
      const full = el.textContent || el.innerText || '';
      el.textContent = '';
      let p = 0;
      (function step(){
        p++;
        el.textContent = full.slice(0,p);
        if(p < full.length) setTimeout(step, 32 + Math.random()*30);
        else el.classList.add('writing'); // show caret after typing finished
      })();
    })();

    /* particles (disabled when reduced motion is requested) */
    (function makeParticles(){
      if(reducedMotion) return;
      const N = 12;
      for(let i=0;i<N;i++){
        const el = document.createElement('div');
        el.style.position = 'absolute';
        el.style.left = (4 + Math.random()*92) + '%';
        el.style.top  = (6 + Math.random()*84) + '%';
        const size = (4 + Math.random()*7);
        el.style.width = size + 'px';
        el.style.height = size + 'px';
        el.style.borderRadius = '50%';
        el.style.background = 'rgba(184,111,80,' + (0.04 + Math.random()*0.08) + ')';
        el.style.filter = 'blur(0.9px)';
        el.style.pointerEvents = 'none';
        particlesEl.appendChild(el);
        const dur = 7000 + Math.random()*9000;
        el.animate([
          { transform: 'translateY(0px) translateX(0px)' },
          { transform: `translateY(${6 + Math.random()*22}px) translateX(${(-6 + Math.random()*12)}px)` },
          { transform: 'translateY(0px) translateX(0px)' }
        ], { duration: dur, iterations: Infinity, easing: 'ease-in-out', delay: Math.random()*2000 });
      }
    })();

    function runFinalReveal(){
      if(confettiEl.dataset.fired) return;
      confettiEl.dataset.fired = '1';
      if(window.confetti){
        if(reducedMotion){
          confetti({ particleCount: 20, spread: 100, origin: { y: 0.2 }, colors:['#ff7b9c','#ffd1c9'] });
          setTimeout(()=> confetti({ particleCount: 36, spread: 160, origin: { y: 0.12 }, colors:['#ff7b9c','#ffd1c9'] }), 260);
        } else {
          confetti({ particleCount: 40, spread: 130, origin: { y: 0.2 }, colors:['#ff7b9c','#ffd1c9','#fff4e6'] });
          setTimeout(()=> confetti({ particleCount: 80, spread: 230, origin: { y: 0.12 }, colors:['#ff7b9c','#ffd1c9','#fff4e6'] }), 260);
          setTimeout(()=> confetti({ particleCount: 120, spread: 280, origin: { y: 0.08 }, colors:['#ff7b9c','#ffd1c9','#fff4e6'] }), 700);
        }
      }

      if(!reducedMotion){
        function makeHeart(x){
          const n = document.createElement('div');
          n.style.position='absolute';
          n.style.left = (x || (8 + Math.random()*84)) + '%';
          n.style.bottom = '-8px';
          n.style.pointerEvents = 'none';
          n.style.opacity = '0';
          n.innerHTML = `<svg width="26" height="26" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 20s-7-4.35-9-6.8C-0.5 9.6 3.4 4 7.5 5.2 9 5.8 10 7.4 12 9.2c2-1.8 3-3.4 4.5-4 4.1-1.2 8 4.4 4.5 8.9-2 2.4-9 6.9-9 6.9z" fill="${Math.random()>0.5? '#ff7b9c':'#ffd1c9'}" opacity="0.95"/></svg>`;
          confettiEl.appendChild(n);
          const duration = 2600 + Math.random()*1200;
          n.animate([
            { transform:'translateY(0px) scale(0.85)', opacity:0 },
            { transform:`translateY(-160px) scale(1.05)`, opacity:1 },
            { transform:'translateY(-320px) scale(0.9)', opacity:0 }
          ], { duration, easing:'cubic-bezier(.2,.9,.3,1)' });
          setTimeout(()=> n.remove(), duration + 180);
        }

        for(let i=0;i<12;i++) setTimeout(()=> makeHeart(), i*110);
        const rain = setInterval(()=> makeHeart(), 180);
        setTimeout(()=> clearInterval(rain), 4600);
      }
    }

    // prevent accidental select on most of the page (allow selection inside .long)
    document.addEventListener('selectstart', (e)=>{ if(e.target.closest('.long')) return; e.preventDefault(); });

    console.log('Edit text nodes by id: slide1, slide3, finalTitle, finalSub (or directly in HTML).');
  </script>
</body>
</html>
